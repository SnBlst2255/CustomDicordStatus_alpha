//–ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–ª–∏–µ–Ω—Ç
const RPC = require('discord-rpc');
const client = new RPC.Client({ transport: 'ipc' });


//–ê–Ω–∏–º–∞—Ü–∏—è –∏–∫–æ–Ω–∫–∏ (–ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ—á–∫–∞, –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ - –∫–∞–¥—Ä)
const animationFrames = [
    'Downloading server data üåç',
    'Downloading server data üåé',
    'Downloading server data üåè',
    'Downloading server data üåé'
];

//–ö–∞–¥—Ä—ã –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä–∞ (–≤—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ—á–∫–∞, –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ - –∫–∞–¥—Ä)
const animationFrames2 = [
    '[-----------------------]',
    '[#----------------------]',
    '[##---------------------]',
    '[###--------------------]',
    '[####-------------------]',
    '[#####------------------]',
    '[######-----------------]',
    '[#######----------------]',
    '[########---------------]',
    '[#########--------------]',
    '[##########-------------]',
    '[###########------------]',
    '[############-----------]',
    '[#############----------]',
    '[##############---------]',
    '[###############--------]',
    '[################-------]',
    '[#################------]',
    '[##################-----]',
    '[###################----]',
    '[####################---]',
    '[#####################--]',
    '[######################-]',
    '[#######################]'
];

//–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏ –∏–Ω–¥–µ–∫—Å–∞ —Ç–µ–∫—É—â–µ–≥–æ –∫–∞–¥—Ä–∞
let index = 0; //–ò–Ω–¥–µ–∫—Å –ø–µ—Ä–≤–æ–≥–æ –∫–∞–¥—Ä–∞
let index2 = 0; //–ò–Ω–¥–µ–∫—Å –≤—Ç–æ—Ä–æ–≥–æ –∫–∞–¥—Ä–∞
let timeStamp; //–î–∞—Ç–∞ –∑–∞–ø—É—Å–∫–∞

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
function updateStatus(frame, frame2) {
    client.setActivity({
        details: `${frame}`,
        state: `${frame2}`,  // –¢–µ–∫—Å—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∞–Ω–∏–º–∞—Ü–∏–µ–π
        largeImageKey: 'https://media.tenor.com/LmKTgSCWvQwAAAAi/this-is-the-end.gif',  //–°—Å—ã–ª–∫–∞ –¥–ª—è –±–æ–ª—å—à–æ–π –∏–∫–æ–Ω–∫–∏
        startTimestamp: timeStamp  // –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    });
}

function updateFrame() {
    const frame1 = animationFrames[index];  // –í—ã–±–∏—Ä–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å–∏–º–≤–æ–ª –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
    const frame2 = animationFrames2[index2];
    updateStatus(frame1, frame2);  // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å

    index = (index + 1) % animationFrames.length; //–ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∫–∞–¥—Ä –ø–µ—Ä–≤–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
    index2 = (index2 + 1) % animationFrames2.length; //–ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∫–∞–¥—Ä –≤—Ç–æ—Ä–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
function animateStatus() {
    timeStamp = Date.now();

    updateFrame();
    setInterval(() => {
        updateFrame();
    }, 15000);  // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—É—é –ø–æ–ª–æ–≤–∏–Ω—É —Å–µ–∫—É–Ω–¥—ã
}

// –ö–æ–≥–¥–∞ Discord RPC –∫–ª–∏–µ–Ω—Ç –≥–æ—Ç–æ–≤
client.on('ready', () => {
    console.log('Discord RPC was connected!');
    animateStatus();
});

// –õ–æ–≥–∏–Ω–∏–º—Å—è –≤ Discord —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º clientId
client.login({ clientId: '1323442478615105668' }).catch(console.error);